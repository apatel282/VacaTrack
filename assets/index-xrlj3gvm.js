import{r as be,a as ge,g as he}from"./vendor-react-BRY8hXab.js";import{r as x,S as ae,T as z,C as B,a as fe,P as pe,b as ve,c as je,d as ye,X as se,e as ke,M as Ne,f as we,g as Se,L as Me,h as Ee,i as De,R as Pe}from"./vendor-ui-Bx0CoKBj.js";import{e as Ce,p as w,i as A,s as q,a as ne,m as Te,b as Oe,c as Y,d as W,f as S,g as J,h as $,j as oe,k as G,l as Ae,n as _,o as Ie}from"./vendor-date-DcKgVCou.js";import{R as Re,P as $e,a as _e,C as Le}from"./vendor-charts-BAy86pmT.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var V={exports:{}},I={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K;function Fe(){if(K)return I;K=1;var a=be(),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),t=Object.prototype.hasOwnProperty,n=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(l,u,b){var h,f={},p=null,j=null;b!==void 0&&(p=""+b),u.key!==void 0&&(p=""+u.key),u.ref!==void 0&&(j=u.ref);for(h in u)t.call(u,h)&&!o.hasOwnProperty(h)&&(f[h]=u[h]);if(l&&l.defaultProps)for(h in u=l.defaultProps,u)f[h]===void 0&&(f[h]=u[h]);return{$$typeof:r,type:l,key:p,ref:j,props:f,_owner:n.current}}return I.Fragment=s,I.jsx=c,I.jsxs=c,I}var H;function qe(){return H||(H=1,V.exports=Fe()),V.exports}var e=qe(),L={},Q;function Je(){if(Q)return L;Q=1;var a=ge();return L.createRoot=a.createRoot,L.hydrateRoot=a.hydrateRoot,L}var Ue=Je();const Ve=he(Ue),de={periodStart:null,periodEnd:null,annualAllotment:0,theme:"system"},X="vacatrack_settings",Z="vacatrack_entries";class ze{async loadSettings(){try{const r=localStorage.getItem(X);return r?JSON.parse(r):null}catch{return null}}async saveSettings(r){localStorage.setItem(X,JSON.stringify(r))}async loadEntries(){try{const r=localStorage.getItem(Z);return r?JSON.parse(r):[]}catch{return[]}}async saveEntries(r){localStorage.setItem(Z,JSON.stringify(r))}async addEntry(r){const s=await this.loadEntries();s.push(r),await this.saveEntries(s)}async updateEntry(r){const s=await this.loadEntries(),t=s.findIndex(n=>n.id===r.id);t!==-1&&(s[t]=r,await this.saveEntries(s))}async deleteEntry(r){const t=(await this.loadEntries()).filter(n=>n.id!==r);await this.saveEntries(t)}async exportAll(){const r=await this.loadSettings(),s=await this.loadEntries();return{settings:r||de,entries:s}}async importAll(r){await this.saveSettings(r.settings),await this.saveEntries(r.entries)}}const C=new ze;function le(a,r){const s=w(a),t=w(r);return A(s,t)?0:Y({start:s,end:t}).filter(o=>!W(o)).length}function U(a){if(!a.periodStart||!a.periodEnd)return null;const r=q(new Date(a.periodStart.year,a.periodStart.month-1,1)),s=ne(new Date(a.periodEnd.year,a.periodEnd.month-1,1));return{start:r,end:s}}function ce(a,r,s,t){const n=w(a),o=w(r),c=Te([n,s]),l=Oe([o,t]);return A(c,l)?0:Y({start:c,end:l}).filter(b=>!W(b)).length}function ie(a,r){const s=U(r);if(!s)return{allotted:r.annualAllotment,used:0,planned:0,remaining:r.annualAllotment,projectedRemaining:r.annualAllotment};let t=0,n=0;for(const l of a){const u=ce(l.startDate,l.endDate,s.start,s.end);l.type==="used"?t+=u:n+=u}const o=r.annualAllotment-t,c=r.annualAllotment-t-n;return{allotted:r.annualAllotment,used:t,planned:n,remaining:o,projectedRemaining:c}}function xe(a,r=new Date){if(a.type!=="planned")return a;const s=Ce(w(a.endDate));return A(r,s)?{...a,type:"used",updatedAt:new Date().toISOString()}:a}function ee(a,r=new Date){const s=[];return{entries:a.map(n=>{const o=xe(n,r);return o!==n&&s.push(o),o}),updated:s}}function Be(a,r){const s=w(a.startDate),t=w(a.endDate);return r.filter(n=>{if(a.id&&n.id===a.id)return!1;const o=w(n.startDate),c=w(n.endDate);return(J(s,c)||s.getTime()===c.getTime())&&(A(t,o)||t.getTime()===o.getTime())})}function Ye(a){if(!a.periodStart||!a.periodEnd)return"No period set";const r=new Date(a.periodStart.year,a.periodStart.month-1,1),s=new Date(a.periodEnd.year,a.periodEnd.month-1,1),t=S(r,"MMM yyyy"),n=S(s,"MMM yyyy");return`${t} – ${n}`}function We(a){const r=U(a);if(!r)return[];const s=[];let t=r.start;for(;J(t,r.end)||$(t,r.end);)s.push(q(t)),t=oe(t,1);return s}function Ge(a,r){const s=w(a),t=w(r);return a===r?S(s,"MMM d, yyyy"):$(s,t)&&G(s,t)?`${S(s,"MMM d")} – ${S(t,"d, yyyy")}`:G(s,t)?`${S(s,"MMM d")} – ${S(t,"MMM d, yyyy")}`:`${S(s,"MMM d, yyyy")} – ${S(t,"MMM d, yyyy")}`}function Ke(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function He(a){const[r,s]=x.useState(!1);return x.useEffect(()=>{const t=document.documentElement;if(a==="dark")t.classList.add("dark"),s(!0);else if(a==="light")t.classList.remove("dark"),s(!1);else{const n=window.matchMedia("(prefers-color-scheme: dark)"),o=c=>{c.matches?(t.classList.add("dark"),s(!0)):(t.classList.remove("dark"),s(!1))};return o(n),n.addEventListener("change",o),()=>n.removeEventListener("change",o)}},[a]),r}function Qe({settings:a,onOpenSettings:r}){return e.jsx("header",{className:"sticky top-0 z-40 bg-bg-100/80 dark:bg-bg-100/80 backdrop-blur-md border-b border-bg-300 dark:border-bg-300",style:{paddingTop:"env(safe-area-inset-top)"},children:e.jsx("div",{className:"max-w-lg mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-text-100 dark:text-text-100",children:"VacaTrack"}),e.jsx("p",{className:"text-sm text-text-200 dark:text-text-100/70",children:Ye(a)})]}),e.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-bg-200 dark:hover:bg-bg-300 transition-colors","aria-label":"Settings",title:"Settings",children:e.jsx(ae,{className:"w-5 h-5 text-text-200 dark:text-text-200"})})]})})})}function Xe({allotted:a,used:r,planned:s,remaining:t,projectedRemaining:n}){const o=n<0,c=[{name:"Used",value:Math.max(0,r),color:"var(--accent-200)"},{name:"Planned",value:Math.max(0,s),color:"var(--accent-100)"},{name:"Available",value:Math.max(0,n),color:"var(--bg-300)"}].filter(l=>l.value>0);return o&&(c.length=0,c.push({name:"Used",value:r,color:"var(--accent-200)"},{name:"Planned",value:s,color:"var(--accent-100)"})),e.jsxs("div",{className:"bg-bg-100 dark:bg-bg-100 rounded-2xl p-4 shadow-sm border border-bg-300 dark:border-bg-300",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsxs("div",{className:"relative w-40 h-40",children:[e.jsx(Re,{width:"100%",height:"100%",children:e.jsx($e,{children:e.jsx(_e,{data:c,cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:2,dataKey:"value",strokeWidth:0,children:c.map((l,u)=>e.jsx(Le,{fill:l.color},`cell-${u}`))})})}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:`text-2xl font-bold ${o?"text-red-500":"text-text-100 dark:text-text-100"}`,children:n}),e.jsx("span",{className:"text-sm text-text-200 dark:text-text-100/70",children:"projected"})]})]})}),o&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["You've exceeded your PTO allotment by ",Math.abs(n)," day",Math.abs(n)!==1?"s":"","."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(F,{label:"Allotted",value:a,color:"text-text-100"}),e.jsx(F,{label:"Used",value:r,color:"text-accent-200"}),e.jsx(F,{label:"Planned",value:s,color:"text-accent-100 dark:text-accent-100"}),e.jsx(F,{label:"Remaining",value:t,color:t<0?"text-red-500":"text-text-100"})]})]})}function F({label:a,value:r,color:s}){return e.jsxs("div",{className:"bg-bg-200 dark:bg-bg-200 rounded-xl p-3 text-center",children:[e.jsx("p",{className:"text-xs text-text-200 dark:text-text-100/70 mb-1",children:a}),e.jsx("p",{className:`text-xl font-semibold ${s}`,children:r})]})}function Ze({entries:a,onEdit:r,onDelete:s}){const t=[...a].sort((n,o)=>o.startDate.localeCompare(n.startDate));return t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-12 h-12 text-bg-300 dark:text-bg-300 mx-auto mb-3"}),e.jsx("p",{className:"text-text-200 dark:text-text-200",children:"No PTO entries yet"}),e.jsx("p",{className:"text-sm text-bg-300 dark:text-bg-300 mt-1",children:"Add your first entry above"})]}):e.jsx("div",{className:"space-y-2",children:t.map(n=>e.jsx(et,{entry:n,onEdit:()=>r(n),onDelete:()=>s(n)},n.id))})}function et({entry:a,onEdit:r,onDelete:s}){const t=le(a.startDate,a.endDate),n=a.type==="used";return e.jsx("div",{className:"bg-bg-100 dark:bg-bg-100 rounded-xl p-4 shadow-sm border border-bg-300 dark:border-bg-300",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${n?"bg-primary-100 dark:bg-primary-500/30":"bg-bg-200 dark:bg-bg-300"}`,children:n?e.jsx(fe,{className:"w-5 h-5 text-accent-200 dark:text-accent-200"}):e.jsx(B,{className:"w-5 h-5 text-text-200 dark:text-text-200"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${n?"bg-accent-200 text-white dark:bg-accent-200 dark:text-white":"bg-bg-200 text-text-200 dark:bg-bg-300 dark:text-text-100"}`,children:n?"Used":"Planned"}),e.jsxs("span",{className:"text-sm font-semibold text-text-100",children:[t," day",t!==1?"s":""]})]}),e.jsx("p",{className:"text-sm text-text-200 dark:text-text-200 mt-1",children:Ge(a.startDate,a.endDate)}),a.notes&&e.jsx("p",{className:"text-sm text-text-200 dark:text-text-200 mt-1 truncate opacity-70",children:a.notes})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:r,className:"p-2 rounded-lg hover:bg-bg-200 dark:hover:bg-bg-300 transition-colors","aria-label":"Edit entry",children:e.jsx(pe,{className:"w-4 h-4 text-text-200 dark:text-text-200"})}),e.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-colors","aria-label":"Delete entry",children:e.jsx(ve,{className:"w-4 h-4 text-text-200 dark:text-text-200 hover:text-red-500"})})]})]})})}function tt({entries:a,settings:r,onEdit:s}){const t=We(r),n=U(r),[o,c]=x.useState(()=>{if(t.length===0)return new Date;const m=q(new Date);return t.find(v=>$(v,m))||t[0]}),l=x.useMemo(()=>t.length===0?!1:!$(o,t[0]),[o,t]),u=x.useMemo(()=>t.length===0?!1:!$(o,t[t.length-1]),[o,t]),b=()=>{l&&c(Ie(o))},h=()=>{u&&c(oe(o,1))},f=x.useMemo(()=>{const m=q(o),g=ne(o);return Y({start:m,end:g})},[o]),p=x.useMemo(()=>{const m=Ae(f[0]);return Array(m).fill(null)},[f]),j=m=>a.filter(g=>{const v=w(g.startDate),y=w(g.endDate);return(_(m,v)||A(m,v))&&(_(m,y)||J(m,y))});return!n||t.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"w-12 h-12 text-bg-300 dark:text-bg-300 mx-auto mb-3"}),e.jsx("p",{className:"text-text-200 dark:text-text-200",children:"No tracking period set"}),e.jsx("p",{className:"text-sm text-bg-300 dark:text-bg-300 mt-1",children:"Configure your period in Settings"})]}):e.jsxs("div",{className:"bg-bg-100 dark:bg-bg-100 rounded-2xl p-4 shadow-sm border border-bg-300 dark:border-bg-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:b,disabled:!l,className:"p-2 rounded-lg hover:bg-bg-200 dark:hover:bg-bg-300 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Previous month",children:e.jsx(je,{className:"w-5 h-5 text-text-100"})}),e.jsx("h3",{className:"text-lg font-semibold text-text-100 dark:text-text-100",children:S(o,"MMMM yyyy")}),e.jsx("button",{onClick:h,disabled:!u,className:"p-2 rounded-lg hover:bg-bg-200 dark:hover:bg-bg-300 disabled:opacity-30 disabled:cursor-not-allowed transition-colors","aria-label":"Next month",children:e.jsx(ye,{className:"w-5 h-5 text-text-100"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map((m,g)=>e.jsx("div",{className:"text-center text-xs font-medium text-text-200 dark:text-text-100/70 py-2",children:m},g))}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[p.map((m,g)=>e.jsx("div",{className:"aspect-square"},`pad-${g}`)),f.map(m=>{const g=j(m),v=(_(m,n.start)||A(m,n.start))&&(_(m,n.end)||J(m,n.end)),y=W(m),M=g.some(P=>P.type==="used"),E=g.some(P=>P.type==="planned");return e.jsxs("button",{onClick:()=>{g.length===1&&s(g[0])},disabled:g.length===0,className:`
                aspect-square rounded-lg text-sm font-medium relative
                flex flex-col items-center justify-center
                transition-colors
                ${y?"text-text-200/50 dark:text-text-100/30":"text-text-100 dark:text-text-100"}
                ${v?"":"opacity-30"}
                ${g.length>0?"cursor-pointer hover:bg-bg-200 dark:hover:bg-bg-300":""}
                ${M?"bg-accent-200 text-white":""}
                ${E&&!M?"bg-accent-100 text-accent-200 dark:bg-accent-100/30 dark:text-accent-100":""}
              `,children:[e.jsx("span",{children:S(m,"d")}),g.length>0&&e.jsxs("div",{className:"flex gap-0.5 mt-0.5",children:[M&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white dark:bg-white"}),E&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent-200"})]})]},m.toISOString())})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 pt-4 border-t border-bg-300 dark:border-bg-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-accent-200"}),e.jsx("span",{className:"text-xs text-text-200 dark:text-text-100/70",children:"Used"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-accent-100"}),e.jsx("span",{className:"text-xs text-text-200 dark:text-text-100/70",children:"Planned"})]})]})]})}function me({isOpen:a,onClose:r,title:s,children:t}){const n=x.useRef(null);return x.useEffect(()=>(a?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[a]),x.useEffect(()=>{const o=c=>{c.key==="Escape"&&r()};if(a)return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[a,r]),a?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:o=>{o.target===o.currentTarget&&r()},children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"}),e.jsxs("div",{ref:n,className:"relative w-full sm:max-w-md bg-bg-100 dark:bg-bg-100 rounded-t-2xl sm:rounded-2xl shadow-xl max-h-[90vh] overflow-hidden flex flex-col animate-slide-up sm:animate-fade-in",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-bg-300 dark:border-bg-300",children:[e.jsx("h2",{className:"text-lg font-semibold text-text-100 dark:text-text-100",children:s}),e.jsx("button",{onClick:r,className:"p-2 -mr-2 rounded-full hover:bg-bg-200 dark:hover:bg-bg-300 transition-colors","aria-label":"Close",children:e.jsx(se,{className:"w-5 h-5 text-text-200 dark:text-text-200"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:t})]})]}):null}function rt({isOpen:a,onClose:r,onSave:s,editingEntry:t,existingEntries:n,settings:o}){const c=S(new Date,"yyyy-MM-dd"),[l,u]=x.useState(c),[b,h]=x.useState(c),[f,p]=x.useState("planned"),[j,m]=x.useState("");x.useEffect(()=>{a&&(t?(u(t.startDate),h(t.endDate),p(t.type),m(t.notes)):(u(c),h(c),p("planned"),m("")))},[a,t,c]);const g=U(o),v=x.useMemo(()=>!l||!b?0:le(l,b),[l,b]),y=x.useMemo(()=>!l||!b||!g?v:ce(l,b,g.start,g.end),[l,b,g,v]),M=x.useMemo(()=>!l||!b?[]:Be({startDate:l,endDate:b,id:t==null?void 0:t.id},n),[l,b,t,n]),E=x.useMemo(()=>{const i={id:(t==null?void 0:t.id)||"temp",type:f,startDate:l,endDate:b,notes:"",createdAt:"",updatedAt:""},N=t?n.filter(D=>D.id!==t.id):n;return ie([...N,i],o).projectedRemaining},[l,b,f,t,n,o]),P=E<0,T=l&&b&&l<=b,O=T&&v>0,d=()=>{if(!O)return;const i=new Date().toISOString(),N={id:(t==null?void 0:t.id)||Ke(),type:f,startDate:l,endDate:b,notes:j.trim(),createdAt:(t==null?void 0:t.createdAt)||i,updatedAt:i};s(N),r()};return e.jsx(me,{isOpen:a,onClose:r,title:t?"Edit PTO":"Add PTO",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p("planned"),className:`flex-1 py-2 px-4 rounded-lg border font-medium transition-colors ${f==="planned"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:"Planned"}),e.jsx("button",{onClick:()=>p("used"),className:`flex-1 py-2 px-4 rounded-lg border font-medium transition-colors ${f==="used"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:"Used"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:l,onChange:i=>{u(i.target.value),i.target.value>b&&h(i.target.value)},className:"w-full px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:b,min:l,onChange:i=>h(i.target.value),className:"w-full px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200"})]})]}),T&&e.jsxs("div",{className:"bg-bg-200 dark:bg-bg-200 rounded-lg p-3 text-center",children:[e.jsx("span",{className:"text-2xl font-bold text-accent-200 dark:text-accent-200",children:y}),e.jsxs("span",{className:"text-text-200 dark:text-text-200 ml-2",children:["PTO day",y!==1?"s":"",y!==v&&e.jsxs("span",{className:"text-xs",children:[" (",v," total, ",y," in period)"]})]})]}),M.length>0&&e.jsxs("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800 rounded-lg flex items-start gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:["This overlaps with ",M.length," existing entr",M.length===1?"y":"ies","."]})]}),P&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg flex items-start gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-red-700 dark:text-red-300",children:["This will exceed your allotment by ",Math.abs(E)," day",Math.abs(E)!==1?"s":"","."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Notes (optional)"}),e.jsx("textarea",{value:j,onChange:i=>m(i.target.value),rows:2,className:"w-full px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200 resize-none",placeholder:"e.g., Summer vacation"})]}),e.jsx("button",{onClick:d,disabled:!O,className:"w-full py-3 px-4 bg-accent-200 hover:bg-accent-200/90 disabled:bg-bg-300 dark:disabled:bg-bg-300 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed",children:t?"Save Changes":"Add PTO"})]})})}const te=["January","February","March","April","May","June","July","August","September","October","November","December"],R=new Date().getFullYear(),re=Array.from({length:10},(a,r)=>R-3+r);function at({isOpen:a,onClose:r,settings:s,onSave:t}){var E,P,T,O;const[n,o]=x.useState(((E=s.periodStart)==null?void 0:E.month)||1),[c,l]=x.useState(((P=s.periodStart)==null?void 0:P.year)||R),[u,b]=x.useState(((T=s.periodEnd)==null?void 0:T.month)||12),[h,f]=x.useState(((O=s.periodEnd)==null?void 0:O.year)||R),[p,j]=x.useState(s.annualAllotment.toString()),[m,g]=x.useState(s.theme);x.useEffect(()=>{var d,i,N,k;a&&(o(((d=s.periodStart)==null?void 0:d.month)||1),l(((i=s.periodStart)==null?void 0:i.year)||R),b(((N=s.periodEnd)==null?void 0:N.month)||12),f(((k=s.periodEnd)==null?void 0:k.year)||R),j(s.annualAllotment.toString()),g(s.theme))},[a,s]);const v=()=>{const d={periodStart:{month:n,year:c},periodEnd:{month:u,year:h},annualAllotment:parseInt(p)||0,theme:m};t(d),r()},y=()=>{const d=new Date(c,n-1),i=new Date(h,u-1);return d<=i},M=y()&&parseInt(p)>0;return e.jsx(me,{isOpen:a,onClose:r,title:"Settings",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Tracking Period Start"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:n,onChange:d=>o(parseInt(d.target.value)),className:"flex-1 px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200",children:te.map((d,i)=>e.jsx("option",{value:i+1,children:d},d))}),e.jsx("select",{value:c,onChange:d=>l(parseInt(d.target.value)),className:"w-24 px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200",children:re.map(d=>e.jsx("option",{value:d,children:d},d))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Tracking Period End"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:u,onChange:d=>b(parseInt(d.target.value)),className:"flex-1 px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200",children:te.map((d,i)=>e.jsx("option",{value:i+1,children:d},d))}),e.jsx("select",{value:h,onChange:d=>f(parseInt(d.target.value)),className:"w-24 px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200",children:re.map(d=>e.jsx("option",{value:d,children:d},d))})]}),!y()&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:"End date must be after start date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Annual PTO Allotment (days)"}),e.jsx("input",{type:"number",min:"0",max:"365",value:p,onChange:d=>j(d.target.value),className:"w-full px-3 py-2 rounded-lg border border-bg-300 dark:border-bg-300 bg-bg-100 dark:bg-bg-100 text-text-100 dark:text-text-100 focus:ring-2 focus:ring-accent-200 focus:border-accent-200",placeholder:"e.g., 20"}),parseInt(p)<=0&&e.jsx("p",{className:"mt-1 text-sm text-amber-500",children:"Please enter your PTO allotment"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-100 mb-2",children:"Theme"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>g("light"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg border transition-colors ${m==="light"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Light"})]}),e.jsxs("button",{onClick:()=>g("dark"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg border transition-colors ${m==="dark"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Dark"})]}),e.jsxs("button",{onClick:()=>g("system"),className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg border transition-colors ${m==="system"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Auto"})]})]})]}),e.jsx("button",{onClick:v,disabled:!M,className:"w-full py-3 px-4 bg-accent-200 hover:bg-accent-200/90 disabled:bg-bg-300 dark:disabled:bg-bg-300 text-white font-medium rounded-lg transition-colors disabled:cursor-not-allowed",children:"Save Settings"})]})})}function st({hasSettings:a,onOpenSettings:r}){return a?null:e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-amber-100 dark:bg-amber-900/30 mb-4",children:e.jsx(Se,{className:"w-8 h-8 text-amber-600 dark:text-amber-400"})}),e.jsx("h2",{className:"text-lg font-semibold text-text-100 dark:text-text-100 mb-2",children:"Welcome to VacaTrack"}),e.jsx("p",{className:"text-text-200 dark:text-text-200 mb-6 max-w-sm mx-auto",children:"Set up your tracking period and PTO allotment to get started."}),e.jsxs("button",{onClick:r,className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(ae,{className:"w-4 h-4"}),"Open Settings"]})]})}function nt({message:a,action:r,duration:s=1e4,onClose:t}){const[n,o]=x.useState(!0),[c,l]=x.useState(100);x.useEffect(()=>{const h=Date.now()+s,f=setInterval(()=>{const p=Date.now(),m=(h-p)/s*100;m<=0?(clearInterval(f),o(!1),setTimeout(t,300)):l(m)},50);return()=>clearInterval(f)},[s,t]);const u=()=>{r==null||r.onClick(),o(!1),setTimeout(t,300)};return e.jsxs("div",{className:`fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 sm:w-80 bg-bg-300 dark:bg-bg-300 text-text-100 dark:text-text-100 rounded-lg shadow-lg overflow-hidden transition-all duration-300 z-50 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-3",children:[e.jsx("span",{className:"text-sm",children:a}),e.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[r&&e.jsx("button",{onClick:u,className:"text-sm font-medium text-accent-200 dark:text-accent-200 hover:opacity-80 transition-colors",children:r.label}),e.jsx("button",{onClick:()=>{o(!1),setTimeout(t,300)},className:"p-1 hover:bg-bg-200 dark:hover:bg-bg-300 rounded transition-colors",children:e.jsx(se,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"h-1 bg-bg-200 dark:bg-bg-200",children:e.jsx("div",{className:"h-full bg-primary-500 transition-all duration-50",style:{width:`${c}%`}})})]})}function ot(){const[a,r]=x.useState(de),[s,t]=x.useState([]),[n,o]=x.useState(!0),[c,l]=x.useState("list"),[u,b]=x.useState(!1),[h,f]=x.useState(!1),[p,j]=x.useState(null),[m,g]=x.useState(null);He(a.theme),x.useEffect(()=>{async function d(){try{const[i,N]=await Promise.all([C.loadSettings(),C.loadEntries()]);i&&r(i);const{entries:k,updated:D}=ee(N);D.length>0&&await Promise.all(D.map(ue=>C.updateEntry(ue))),t(k)}catch(i){console.error("Failed to load data:",i)}finally{o(!1)}}d()},[]),x.useEffect(()=>{if(n)return;const d=setInterval(()=>{t(i=>{const{entries:N,updated:k}=ee(i);return k.length>0&&Promise.all(k.map(D=>C.updateEntry(D))).catch(D=>{console.error("Failed to update auto-converted entries:",D)}),N})},3600*1e3);return()=>clearInterval(d)},[n]);const v=a.periodStart&&a.periodEnd&&a.annualAllotment>0,y=ie(s,a),M=async d=>{r(d),await C.saveSettings(d)},E=async d=>{const i=xe(d);s.some(k=>k.id===i.id)?(await C.updateEntry(i),t(k=>k.map(D=>D.id===i.id?i:D))):(await C.addEntry(i),t(k=>[...k,i]))},P=async d=>{t(i=>i.filter(N=>N.id!==d.id)),await C.deleteEntry(d.id),g({message:"PTO entry deleted",action:{label:"Undo",onClick:async()=>{await C.addEntry(d),t(i=>[...i,d])}}})},T=d=>{j(d),f(!0)},O=()=>{f(!1),j(null)};return n?e.jsx("div",{className:"min-h-screen bg-bg-200 dark:bg-bg-100 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-bg-200 dark:bg-bg-100",children:[e.jsx(Qe,{settings:a,onOpenSettings:()=>b(!0)}),e.jsx("main",{className:"max-w-lg mx-auto px-4 py-4 pb-24",children:v?e.jsxs("div",{className:"space-y-4",children:[e.jsx(Xe,{...y}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>l("list"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-lg border font-medium transition-colors ${c==="list"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:[e.jsx(Me,{className:"w-4 h-4"}),"List"]}),e.jsxs("button",{onClick:()=>l("calendar"),className:`flex-1 flex items-center justify-center gap-2 py-2 px-4 rounded-lg border font-medium transition-colors ${c==="calendar"?"border-accent-200 bg-accent-200 text-white":"border-bg-300 dark:border-bg-300 text-text-200 dark:text-text-200 hover:bg-bg-100 dark:hover:bg-bg-200"}`,children:[e.jsx(Ee,{className:"w-4 h-4"}),"Calendar"]})]}),c==="list"?e.jsx(Ze,{entries:s,onEdit:T,onDelete:P}):e.jsx(tt,{entries:s,settings:a,onEdit:T})]}):e.jsx(st,{hasSettings:!1,onOpenSettings:()=>b(!0)})}),v&&e.jsx("button",{onClick:()=>f(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg flex items-center justify-center transition-colors",style:{marginBottom:"env(safe-area-inset-bottom)"},"aria-label":"Add PTO entry",children:e.jsx(De,{className:"w-6 h-6"})}),e.jsx(at,{isOpen:u,onClose:()=>b(!1),settings:a,onSave:M}),e.jsx(rt,{isOpen:h,onClose:O,onSave:E,editingEntry:p,existingEntries:s,settings:a}),m&&e.jsx(nt,{message:m.message,action:m.action,onClose:()=>g(null)})]})}Ve.createRoot(document.getElementById("root")).render(e.jsx(Pe.StrictMode,{children:e.jsx(ot,{})}));
